<?xml version="1.0" encoding="utf-8"?>
<!-- 
    AndroidManifest.xml entries for Plugin Sandbox (Option 3)
    Add these entries to your app's AndroidManifest.xml
    
    This is a documentation fragment - copy the elements below into your app's AndroidManifest.xml
    inside the <manifest> tag (permission) and inside <application> tag (service).
    
    NOTE: This file is wrapped in a <manifest> tag for XML validity, but you should copy
    the individual elements (permission and service) separately into your AndroidManifest.xml.
-->
<manifest xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Permission for plugin sandbox (optional, for extra security) -->
    <!-- Add this inside <manifest> tag, before <application> -->
    <permission
        android:name="com.ble1st.connectias.permission.PLUGIN_SANDBOX"
        android:protectionLevel="signature" />

    <application>
        <!-- Plugin Sandbox Service -->
        <!-- Add this inside <application> tag -->
        <service
            android:name="com.ble1st.connectias.core.plugin.PluginSandboxService"
            android:process=":plugin_sandbox"
            android:isolatedProcess="false"
            android:exported="false"
            android:permission="com.ble1st.connectias.permission.PLUGIN_SANDBOX">
            
            <!-- 
                android:process=":plugin_sandbox" - Runs in separate process
                android:isolatedProcess="false" - Allows file access (set to true for maximum isolation)
                android:exported="false" - Not accessible from other apps
                android:permission - Requires signature permission
            -->
        </service>
    </application>
</manifest>

<!-- 
    NOTES:
    
    1. Process Isolation:
       - :plugin_sandbox creates a new process named "com.ble1st.connectias:plugin_sandbox"
       - Separate memory space from main app
       - Plugin crash does NOT crash main app
       
    2. isolatedProcess Options:
       - false: Plugin can access app files (needed for plugin loading)
       - true: Maximum isolation, but requires custom file sharing via ContentProvider
       
    3. Memory Limits:
       - Each process has its own heap limit (~256-512 MB depending on device)
       - Prevents plugins from consuming all app memory
       
    4. Security:
       - signature permission ensures only your app can bind to service
       - exported=false prevents external apps from accessing sandbox
-->
