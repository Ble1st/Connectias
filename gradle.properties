# SPDX-License-Identifier: Apache-2.0
# Copyright (c) 2025 Connectias

# Project-wide Gradle settings.
# IDE (e.g. Android Studio) users:
# Gradle settings configured through the IDE *will override*
# any settings specified in this file.
# For more details on how to configure your build environment visit
# http://www.gradle.org/docs/current/userguide/build_environment.html

# ============================================================================
# Build Performance Optimizations
# ============================================================================
# Specifies the JVM arguments used for the daemon process.
# Memory optimizations based on Now in Android best practices
org.gradle.jvmargs=-Xmx4g -Xms4g -Dfile.encoding=UTF-8 -XX:+UseG1GC -XX:SoftRefLRUPolicyMSPerMB=1 -XX:ReservedCodeCacheSize=256m -XX:+HeapDumpOnOutOfMemoryError

# Kotlin Daemon memory settings
kotlin.daemon.jvmargs=-Xmx4g -Xms4g -Dfile.encoding=UTF-8 -XX:+UseG1GC -XX:SoftRefLRUPolicyMSPerMB=1 -XX:ReservedCodeCacheSize=320m -XX:+HeapDumpOnOutOfMemoryError

# Enable parallel builds for faster compilation
org.gradle.parallel=true

# Enable Gradle build cache for faster incremental builds
org.gradle.caching=true

# Enable configuration cache (experimental but stable)
org.gradle.configuration-cache=true
org.gradle.configuration-cache.parallel=true
org.gradle.configuration-cache.problems=warn

# Don't configure projects on demand (can cause issues)
org.gradle.configureondemand=false
# ============================================================================
# Android Configuration
# ============================================================================
# AndroidX package structure to make it clearer which packages are bundled with the
# Android operating system, and which are packaged with your app's APK
# https://developer.android.com/topic/libraries/support-library/androidx-rn
android.useAndroidX=true

# Enables namespacing of each library's R class so that its R class includes only the
# resources declared in the library itself and none from the library's dependencies,
# thereby reducing the size of the R class for that library
android.nonTransitiveRClass=true

# Disable unnecessary Android build features for faster builds
android.defaults.buildfeatures.aidl=false
android.defaults.buildfeatures.renderscript=false
android.defaults.buildfeatures.resvalues=false
android.defaults.buildfeatures.shaders=false

# ============================================================================
# Phase 8: Performance & Monitoring
# ==============================================================================

# R8 Full Mode - Aggressive Optimierungen
# https://r8.googlesource.com/r8/+/refs/heads/main/compatibility-faq.md#r8-full-mode
# WARNUNG: Kann Breaking Changes verursachen - gründlich testen!
android.enableR8.fullMode=true

# Non-transitive R classes für schnellere Builds
android.nonFinalResIds=false

# ============================================================================
# Kotlin Configuration
# ============================================================================
# Kotlin code style for this project: "official" or "obsolete":
kotlin.code.style=official

# Fix NDK version for all modules (Android Studio installed r29)
android.ndkVersion=29.0.14206865

# ============================================================================
# Connectias Module Configuration
# ============================================================================
# Core Modules (always enabled - no property needed)
# - app
# - common
# - core
# - core:common
# - core:data
# - core:database
# - core:datastore
# - core:domain
# - core:model
# - core:network
# - core:testing
# - core:ui
# - core:designsystem
# - feature-settings
# - benchmark

# Build Variants: full | minimal | custom
build.variant=custom

# Runtime Module Loading (preparation for future plugin system)
runtime.module.loading.enabled=true


